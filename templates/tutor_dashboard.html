{% extends "base.html" %}
{% block content %}
<h2 class="text-xl font-semibold mb-4">Tutor Dashboard</h2>
<div class="grid md:grid-cols-2 gap-4">
  {% for entry in class_data %}
    <div class="bg-white p-4 rounded shadow">
      <div class="flex justify-between items-center">
        <div><h3 class="font-semibold">{{ entry.class.title }}</h3><div class="text-sm text-slate-500">{{ entry.class.description }}</div></div>
        <div class="text-sm text-slate-600">Students: {{ entry.students|length }}</div>
      </div>

      <div class="mt-3 space-y-2">
        <div class="flex gap-2">
          <a href="{{ url_for('tutor_upload_quiz', class_id=entry.class.id) }}" class="px-3 py-1 bg-sky-600 text-white rounded">Create Quiz</a>
          <a href="{{ url_for('tutor_attendance', class_id=entry.class.id) }}" class="px-3 py-1 bg-amber-500 text-white rounded">Mark Attendance</a>
          <a href="{{ url_for('export_attendance', class_id=entry.class.id) }}" class="px-3 py-1 bg-slate-100 rounded">Export Attendance</a>
        </div>

        <div class="mt-2">
          <h4 class="font-medium">Quizzes</h4>
          <ul class="mt-2 space-y-1 text-sm">
            {% for stats in entry.quizzes %}
              <li class="flex justify-between items-center border rounded p-2">
                <div>
                  <strong>{{ stats.quiz.title }}</strong>
                  <div class="text-xs text-slate-500">{{ stats.quiz.description or '' }}</div>
                </div>
                <div class="flex gap-2 items-center">
                  <div class="text-xs">Avg: {{ stats.avg_score }}%</div>
                  <a href="{{ url_for('edit_quiz', quiz_id=stats.quiz.id) }}" class="px-2 py-1 bg-slate-100 rounded">Edit</a>
                  <a href="{{ url_for('export_quiz_csv', quiz_id=stats.quiz.id) }}" class="px-2 py-1 bg-slate-100 rounded">Export CSV</a>
                </div>
              </li>
            {% else %}
              <li class="text-slate-500">No quizzes yet</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  {% endfor %}
</div>
{% endblock %}
